<div class="page-content">
  <h2 class="center-text">{{ app?.name }}</h2>
  <div class="container">
    <mat-card>
      <mat-card-content>
        <table class="app-info-table">
          <tr>
            <td class="table-key">Status</td>
            <td class="table-value">
              <span *ngIf="!app?.disabled">Active</span>
              <span *ngIf="app?.disabled" class="error-text">Disabled</span>
            </td>
          </tr>
          <tr>
            <td class="table-key">App ID</td>
            <td class="table-value"><copy-string-box [data]=app?.appId></copy-string-box></td>
          </tr>
          <tr>
            <td class="table-key">App secret</td>
            <td class="table-value">
              <span> ***************
                <button mat-icon-button aria-label="view secret"
                  (click)="viewSecretClick()">
                  <mat-icon>visibility</mat-icon>
                </button>
              </span>
            </td>
          </tr>
          <tr>
            <td class="table-key">Webhook</td>
            <td class="table-value">
              <span *ngIf="app?.webhook">{{ app?.webhook }}</span>
              <span *ngIf="!app?.webhook" class="no-webhook">not set</span>
              <span>
                <button mat-icon-button
                  (click)="setWebHook()">
                  <mat-icon>edit</mat-icon>
                </button>
              </span>
              <div>
                <a href="https://trtlapps.com/docs/apps/webhooks" target="_blank">learn more about webhooks</a>
              </div>
            </td>
          </tr>
        </table>
        <div class="spacer"></div>
        <div *ngIf="!changingState">
          <p *ngIf="stateErrorMessage" class="error-text">{{ stateErrorMessage }}</p>
          <button mat-stroked-button *ngIf="!app?.disabled" (click)="setAppState(false)">Disable app</button>
          <button mat-stroked-button *ngIf="app?.disabled" (click)="setAppState(true)">Activate app</button>
        </div>
        <div *ngIf="changingState">
          <mat-spinner diameter="64"></mat-spinner>
        </div>
        <div class="spacer"></div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
